<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand">Menu</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav me-auto">
        <a class="nav-link" href="principal.html">Tienda</a>
        <a class="nav-link active" href="cuenta.html">Perfil</a>
        <a class="nav-link" href="about.html">Sobre Pixel</a>
        <a class="nav-link disabled">Otros productos (proximamente)</a>
      </div>
      <span id="usuarioInfo" class="navbar-text mx-auto"></span>
    </div>
  </div>
</nav>

  <div class="container mt-5">
  <div class="row justify-content-center">

    <div class="col-md-5 mb-4">
      <div class="border p-4 rounded bg-white text-center">
        <h3 class="mb-3">Registro</h3>
        <input type="text" class="form-control mb-3" id="regUser" placeholder="Usuario">
        <input type="password" class="form-control mb-3" id="regPass" placeholder="Contraseña">
        <button class="btn btn-primary w-100" onclick="register()">Registrar</button>
      </div>
    </div>

    <div class="col-md-5 mb-4">
      <div class="border p-4 rounded bg-white text-center">
        <h3 class="mb-3">Iniciar sesión</h3>
        <input type="text" class="form-control mb-3" id="usuari" placeholder="Usuario">
        <input type="password" class="form-control mb-3" id="contrassenya" placeholder="Contraseña">
        <button class="btn btn-success w-100" onclick="validarLogin()">Inicia sesión</button>
      </div>
    </div>
  </div>
</div>

    <script>
        function register(){
        const user = document.getElementById("regUser").value;
        const pass = document.getElementById("regPass").value;

        if (user===""||pass===""){
        alert("Ompli tots els camps");
        return;
        }

        let users = localStorage.getItem("users");
        users = users ? JSON.parse(users) : {};

        if (users[user]){
        alert("L'usuari ja existeix");
        return;
        }

        users[user] = pass;
        localStorage.setItem("users", JSON.stringify(users));
        alert("S'ha creat l'usuari. Pots iniciar sessió");
      }
      function validarLogin(){
        let usuari = document.getElementById("usuari").value;
        let contrassenya = document.getElementById("contrassenya").value;

          if (usuari == ""){
            alert ("El camp d'usuari és obligatori")
            return;
          }
          if (contrassenya == ""){
            alert ("El camp contrassenya és obligatori")
            return;
          }
          
          let users = localStorage.getItem("users");
          users = users ? JSON.parse(users) : {};

          if (users[usuari] && users[usuari] === contrassenya) {
              alert("Login correcte");
              localStorage.setItem("iniciosesion", usuari);
              window.location.href = 'principal.html';
            } else {
              alert("Usuari o contrassenya incorrectes");
            }

    }
    </script>
</body>
</html>